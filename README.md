# Unreal Engine Localization Helper

A Python utility for managing Unreal Engine 5.x localization files. This tool helps you convert between PO (gettext) and CSV formats, making it easier to work with translations in spreadsheet applications.

## Features

- **po2csv**: Convert PO files to CSV format (with or without duplicates)
- **csv2po**: Convert CSV files back to PO format
- **fill2po**: Fill empty translations in existing PO files from CSV data

## Installation

### Requirements

- Python 2.7 or Python 3.x
- Required packages:
  - `polib`
  - `unicodecsv`

### Install Dependencies

```bash
pip install polib unicodecsv
```

## Usage

### 1. Convert PO to CSV

Convert a PO file to CSV format. You can choose to include or exclude duplicate entries.

```bash
# With duplicates
python main.py po2csv <po_file> True

# Without duplicates (creates a no_dupes_ prefixed file and dupes.txt)
python main.py po2csv <po_file> False
```

**Example:**
```bash
python main.py po2csv Game.po True
```

This creates a CSV file with columns: `comment`, `msgctxt`, `Raw` (msgid), `English` (msgstr)

### 2. Convert CSV to PO

Convert a CSV file to PO format. Specify which column contains the translations.

```bash
python main.py csv2po <csv_file> <csv_column>
```

**Example:**
```bash
python main.py csv2po translations.csv 3
```

The column index is 0-based (0 = first column, 1 = second column, etc.)

### 3. Fill Empty Translations in PO File

Update an existing PO file with translations from a CSV file. Only fills entries where `msgstr` is empty.

```bash
python main.py fill2po <csv_file> <csv_column> <po_file>
```

**Example:**
```bash
python main.py fill2po translations.csv 3 Game.po
```

This command:
- Matches entries by `msgctxt` (context) first, then by `msgid` (source text)
- Only updates entries with empty translations
- Reports how many rows were filled and how many were not found

## Manifest Files

This repository includes two important manifest files that need to be copied to your Unreal Engine installation directories:

### Copy these files:

```
Engine.manifest → UE_5.6\Engine\Content\Localization\Engine\
Editor.manifest → UE_5.6\Engine\Content\Localization\Editor\
```

**Note:** Replace `UE_5.6` with your actual Unreal Engine version directory (e.g., `UE_5.5`, `UE_5.4`, etc.)

These manifest files are essential for Unreal Engine's localization system to properly recognize and process translations.

## CSV Format

### Format Generated by po2csv

The `po2csv` command creates a CSV with the following columns:

| Column 0 | Column 1 | Column 2 | Column 3 |
|----------|----------|----------|----------|
| comment  | msgctxt  | Raw (msgid) | English (msgstr) |

- **comment**: Entry comments from the PO file
- **msgctxt**: Context identifier for the translation
- **Raw (msgid)**: Source text (original language)
- **English (msgstr)**: Translated text

### Format Expected by csv2po and fill2po

The `csv2po` and `fill2po` commands expect a CSV with this format:

| Column 0 | Column 1 | Column 2+ |
|----------|----------|-----------|
| msgctxt  | msgid    | Translation(s) |

- **msgctxt**: Context identifier for the translation
- **msgid**: Source text (original language)
- **Translation columns**: One or more columns with translations in different languages

**Note:** The CSV format generated by `po2csv` is **not directly compatible** with `csv2po` or `fill2po` because:
- `po2csv` includes a comment column (Column 0), shifting all other columns by one
- `csv2po` and `fill2po` expect msgctxt in Column 0, not Column 1

If you want to use a CSV generated by `po2csv` with the other commands, you'll need to either:
1. Remove the comment column from the CSV file, or
2. Manually edit the CSV to match the expected format (msgctxt in Column 0, msgid in Column 1)

## License

Copyright (c) 2025 Pawel Mania. All rights reserved.
